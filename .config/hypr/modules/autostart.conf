#################
### AUTOSTART ###
#################

# 1. Environment & D-Bus (Crucial for screen sharing and app launches)
# This ensures all services know they are in a Wayland session
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = gnome-keyring-daemon --start --components=secrets

# 2. Authentication & Core Daemons
exec-once = systemctl --user start hyprpolkitagent
exec-once = udiskie &

# 3. Display & Wallpapers
exec-once = sleep 0.5 && swww-daemon

# 4. Desktop Components
# Note: You have Waybar and SwayNC enabled as systemd services already.
# However, if they fail to start, uncomment the lines below:
# exec-once = waybar
# exec-once = swaync

# 5. Multimedia & Inputs
exec-once = mcontrolcenter

# 6. User Apps
exec-once = $terminal

# 7. Cleanup (Optional)
# This prevents the "FDM" service from starting if it was created by an XDG autostart file
# exec-once = systemctl --user stop app-FDM@autostart.service
